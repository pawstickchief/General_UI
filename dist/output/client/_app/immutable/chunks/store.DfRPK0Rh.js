import{I,h as o,e as N,J as A,K as R,M as S,N as m,O as h,P as v,Q as g,R as p,S as k,U as x,T as b,u as D,V as F,W as L,g as O,s as P}from"./runtime.BL0abR6R.js";function w(s,n,a=!1){o&&N();var e=s,r=null,u=null,i=x,T=a?A:0,c=!1;const y=(l,t=!0)=>{c=!0,_(t,l)},_=(l,t)=>{if(i===(i=l))return;let d=!1;if(o){const E=e.data===R;!!i===E&&(e=S(),m(e),h(!1),d=!0)}i?(r?v(r):t&&(r=g(()=>t(e))),u&&p(u,()=>{u=null})):(u?v(u):t&&(u=g(()=>t(e))),r&&p(r,()=>{r=null})),d&&h(!0)};I(()=>{c=!1,n(y),c||_(null,null)},T),o&&(e=k)}function U(s,n,a){if(s==null)return n(void 0),b;const e=D(()=>s.subscribe(n,a));return e.unsubscribe?()=>e.unsubscribe():e}let f=!1;function C(s,n,a){const e=a[n]??(a[n]={store:null,source:L(void 0),unsubscribe:b});if(e.store!==s)if(e.unsubscribe(),e.store=s,s==null)e.source.v=void 0,e.unsubscribe=b;else{var r=!0;e.unsubscribe=U(s,u=>{r?e.source.v=u:P(e.source,u)}),r=!1}return O(e.source)}function H(){const s={};return F(()=>{for(var n in s)s[n].unsubscribe()}),s}function J(s){var n=f;try{return f=!1,[s(),f]}finally{f=n}}export{C as a,J as c,w as i,H as s};
