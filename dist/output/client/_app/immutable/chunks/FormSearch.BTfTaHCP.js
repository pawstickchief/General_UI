import{a0 as de,p as se,m as K,t as x,s as R,g as e,a as le,c as s,b as v,r as a,n as ke,H as pe,D as _e}from"./runtime.BL0abR6R.js";import{l as xe,e as f,s as C}from"./render.CxwJUUM4.js";import{i as ye,p as N}from"./2.7IsobFCL.js";import{a as m,t as y,c as qe}from"./disclose-version.CCpMAAFc.js";import"./legacy.BWim2NN6.js";import{i as we}from"./store.DfRPK0Rh.js";import{e as A,i as E}from"./Layout.BjnZ7Ewd.js";import{r as I,s as ae,a as O}from"./attributes.HwkUCdGZ.js";import{a as De,b as Te}from"./input.DEjAtde0.js";import{i as oe}from"./lifecycle.DtcGbrmE.js";import{c as ie}from"./index-client.C2hQeMyM.js";function ne(t,o,i){if(t.multiple)return Se(t,o);for(var l of t.options){var d=B(l);if(ye(d,o)){l.selected=!0;return}}(!i||o!==void 0)&&(t.selectedIndex=-1)}function Le(t,o){de(()=>{var i=new MutationObserver(()=>{var l=t.__value;ne(t,l)});return i.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{i.disconnect()}})}function Qe(t,o,i=o){var l=!0;xe(t,"change",d=>{var c=d?"[selected]":":checked",b;if(t.multiple)b=[].map.call(t.querySelectorAll(c),B);else{var u=t.querySelector(c)??t.querySelector("option:not([disabled])");b=u&&B(u)}i(b)}),de(()=>{var d=o();if(ne(t,d,l),l&&d===void 0){var c=t.querySelector(":checked");c!==null&&(d=B(c),i(d))}t.__value=d,l=!1}),Le(t)}function Se(t,o){for(var i of t.options)i.selected=~o.indexOf(B(i))}function B(t){return"__value"in t?t.__value:t.value}var Re=y('<label class="inline-flex items-center"><input type="checkbox"> <span class="ml-2"> </span></label>'),Ae=y('<th class="border-b border-borderLight dark:border-borderDark p-3 text-left font-semibold svelte-12m41q9"> </th>'),Be=y('<td class="border-b border-borderLight dark:border-borderDark p-3 svelte-12m41q9"> </td>'),Fe=y('<tr class="hover:bg-grayLight dark:hover:bg-gray-700 transition duration-300 svelte-12m41q9"><td class="border-b border-borderLight dark:border-borderDark p-3 svelte-12m41q9"><input type="checkbox"></td><!><td class="border-b border-borderLight dark:border-borderDark p-3 fixed-right svelte-12m41q9"><button class="btn-edit svelte-12m41q9">编辑</button> <button class="btn-delete svelte-12m41q9">删除</button></td></tr>'),je=y('<tr class="svelte-12m41q9"><td class="text-center p-4 text-secondary dark:text-neutral svelte-12m41q9">暂无数据</td></tr>'),Ce=y('<div class="table-container bg-lightBackground dark:bg-darkBackground text-lightText dark:text-darkText shadow-md rounded-lg p-4 svelte-12m41q9"><div class="mb-4"><h4 class="font-semibold">显示列</h4> <div class="flex gap-2 flex-wrap"></div></div> <div class="table-wrapper overflow-auto svelte-12m41q9"><table class="w-full border-collapse bg-cardLight dark:bg-cardDark text-lightText dark:text-darkText rounded-lg overflow-hidden shadow-lg svelte-12m41q9"><thead class="bg-grayLight dark:bg-borderDark"><tr><th class="border-b border-borderLight dark:border-borderDark p-3 text-left font-semibold svelte-12m41q9"><input type="checkbox"></th><!><th class="border-b border-borderLight dark:border-borderDark p-3 text-left font-semibold fixed-right svelte-12m41q9">操作</th></tr></thead><tbody><!></tbody></table></div> <div class="mt-4 flex justify-end gap-2"><button class="btn-add svelte-12m41q9">添加用户</button> <button class="btn-delete svelte-12m41q9">批量删除</button></div></div>');function We(t,o){se(o,!1);let i=N(o,"columns",24,()=>[]),l=N(o,"rows",24,()=>[]),d=new Set,c=K([...i()]),b=K(!1);const u=ie(),w=r=>{R(c,i().filter(n=>n.key===r?!e(c).includes(n):e(c).includes(n)))},F=r=>{d.has(r)?d.delete(r):d.add(r)},j=()=>{e(b)?d.clear():l().forEach(r=>d.add(r.id)),R(b,!e(b))},P=r=>{u("delete",r)},U=()=>{u("addUser"),console.log("添加")},k=()=>{u("bulkDelete",{ids:Array.from(d)}),d.clear(),R(b,!1)},D=r=>{u("edit",r)};oe();var p=Ce(),T=s(p),q=v(s(T),2);A(q,5,i,E,(r,n)=>{var g=Re(),h=s(g);I(h),x(()=>ae(h,e(c).includes(e(n))));var _=v(h,2),S=s(_,!0);a(_),a(g),x(()=>C(S,e(n).label)),f("change",h,()=>w(e(n).key)),m(r,g)}),a(q),a(T);var L=v(T,2),Q=s(L),z=s(Q),W=s(z),H=s(W),M=s(H);I(M),a(H);var ce=v(H);A(ce,1,()=>e(c),E,(r,n)=>{var g=Ae(),h=s(g,!0);a(g),x(()=>C(h,e(n).label)),m(r,g)}),ke(),a(W),a(z);var X=v(z),ve=s(X);{var be=r=>{var n=qe(),g=pe(n);A(g,1,l,h=>h.id,(h,_)=>{var S=Fe(),V=s(S),G=s(V);I(G),x(()=>ae(G,d.has(e(_).id))),a(V);var ee=v(V);A(ee,1,()=>e(c),E,(he,fe)=>{var J=Be(),me=s(J,!0);a(J),x(()=>C(me,e(_)[e(fe).key])),m(he,J)});var te=v(ee),re=s(te),ge=v(re,2);a(te),a(S),f("change",G,()=>F(e(_).id)),f("click",re,()=>D(e(_))),f("click",ge,()=>P(e(_))),m(h,S)}),m(r,n)},ue=r=>{var n=je(),g=s(n);a(n),x(()=>O(g,"colspan",e(c).length+2)),m(r,n)};we(ve,r=>{l().length>0?r(be):r(ue,!1)})}a(X),a(Q),a(L);var Y=v(L,2),Z=s(Y),$=v(Z,2);a(Y),a(p),x(()=>$.disabled=d.size===0),De(M,()=>e(b),r=>R(b,r)),f("change",M,j),f("click",Z,U),f("click",$,k),m(t,p),le()}var Ee=y('<div class="flex flex-col space-y-1"><label class="text-sm font-medium text-lightText dark:text-darkText"> </label> <input type="text" class="border border-borderLight dark:border-borderDark rounded-md p-2 w-full bg-cardLight dark:bg-cardDark text-lightText dark:text-darkText focus:ring-2 focus:ring-primary focus:outline-none transition svelte-1b03mkc"></div>'),Ie=y('<div class="search-container bg-lightBackground dark:bg-darkBackground text-lightText dark:text-darkText p-6 rounded-lg shadow-lg space-y-6 svelte-1b03mkc"><div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></div> <div class="flex justify-end space-x-4"><button class="bg-primary hover:bg-blue-600 text-accent px-4 py-2 rounded-md transition shadow-sm">搜索</button> <button class="bg-neutral dark:bg-gray-700 hover:bg-gray-400 dark:hover:bg-gray-600 text-lightText dark:text-darkText px-4 py-2 rounded-md transition shadow-sm">重置</button></div></div>');function Xe(t,o){se(o,!1);let i=N(o,"searchParams",24,()=>[]),l=K({});const d=ie(),c=()=>{console.log("搜索参数:",e(l)),d("search",{filters:e(l)})},b=()=>{R(l,{}),d("search",{filters:{}})};oe();var u=Ie(),w=s(u);A(w,5,i,E,(U,k)=>{var D=Ee(),p=s(D),T=s(p);a(p);var q=v(p,2);I(q),a(D),x(()=>{O(p,"for",e(k).key),C(T,`${e(k).label??""}:`),O(q,"id",e(k).key),O(q,"placeholder",`请输入${e(k).label}`)}),Te(q,()=>e(l)[e(k).key],L=>_e(l,e(l)[e(k).key]=L)),m(U,D)}),a(w);var F=v(w,2),j=s(F),P=v(j,2);a(F),a(u),f("click",j,c),f("click",P,b),m(t,u),le()}export{Xe as F,We as a,Qe as b};
